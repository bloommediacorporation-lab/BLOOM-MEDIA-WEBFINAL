import{ad as E}from"./CTC7hIcE.js";import{r as j,l as O}from"./BGGTUj09.js";function A(s){return Object.prototype.toString.call(s)==="[object Date]"}function k(s,a,t,r){if(typeof t=="number"||A(t)){const n=r-t,e=(t-a)/(s.dt||1/60),f=s.opts.stiffness*n,o=s.opts.damping*e,d=(f-o)*s.inv_mass,i=(e+d)*s.dt;return Math.abs(i)<s.opts.precision&&Math.abs(n)<s.opts.precision?r:(s.settled=!1,A(t)?new Date(t.getTime()+i):t+i)}else{if(Array.isArray(t))return t.map((n,e)=>k(s,a[e],t[e],r[e]));if(typeof t=="object"){const n={};for(const e in t)n[e]=k(s,a[e],t[e],r[e]);return n}else throw new Error(`Cannot spring ${typeof t} values`)}}function $(s,a={}){const t=E(s),{stiffness:r=.15,damping:n=.8,precision:e=.01}=a;let f,o,d,i=s,l=s,c=1,w=0,b=!1;function M(y,p={}){l=y;const D=d={};return s==null||p.hard||g.stiffness>=1&&g.damping>=1?(b=!0,f=j.now(),i=y,t.set(s=l),Promise.resolve()):(p.soft&&(w=1/((p.soft===!0?.5:+p.soft)*60),c=0),o||(f=j.now(),b=!1,o=O(m=>{if(b)return b=!1,o=null,!1;c=Math.min(c+w,1);const P=Math.min(m-f,1e3/30),h={inv_mass:c,opts:g,settled:!0,dt:P*60/1e3},C=k(h,i,s,l);return f=m,i=s,t.set(s=C),h.settled&&(o=null),!h.settled})),new Promise(m=>{o.promise.then(()=>{D===d&&m()})}))}const g={set:M,update:(y,p)=>M(y(l,s),p),subscribe:t.subscribe,stiffness:r,damping:n,precision:e};return g}export{A as i,$ as s};
