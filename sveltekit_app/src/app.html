<!doctype html>
<html lang="ro" class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover" />
    
    <!-- PRECONNECTS FIRST -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link rel="preconnect" href="https://consent.cookiebot.com" crossorigin />
    <link rel="preconnect" href="https://www.googletagmanager.com" crossorigin />
    
    <!-- META TAGS -->
    <meta name="description" content="Bloom Media - agenție de marketing digital și automatizare." />
    <meta name="theme-color" content="#080808" />
    <link rel="icon" href="%sveltekit.assets%/favicon.svg" />
    
    <!-- CONSENT DEFAULTS - PRIMUL SCRIPT -->
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() { dataLayer.push(arguments); }
      gtag('consent', 'default', {
        'ad_storage': 'denied',
        'ad_user_data': 'denied',
        'ad_personalization': 'denied',
        'analytics_storage': 'denied',
        'functionality_storage': 'granted',
        'security_storage': 'granted',
        'wait_for_update': 500
      });
      gtag('set', 'ads_data_redaction', true);
    </script>

    <script 
      id="Cookiebot" 
      src="https://consent.cookiebot.com/uc.js" 
      data-cbid="c4162480-9dd0-4d9a-9d64-3527d2289375"
      data-blockingmode="auto"
      defer
      type="text/javascript"
    ></script>

    <!-- GTM - ASYNC (nu blocking, dar după Cookiebot) -->
    <script>
      window.addEventListener('load', function() {
        var isMobile = window.matchMedia('(max-width: 768px)').matches || window.matchMedia('(pointer: coarse)').matches;
        if (isMobile) return;
        window.dataLayer = window.dataLayer || [];
        window.dataLayer.push({'gtm.start': new Date().getTime(), event: 'gtm.js'});
        var gtmScript = document.createElement('script');
        gtmScript.async = true;
        gtmScript.src = 'https://www.googletagmanager.com/gtm.js?id=GTM-THRM454W';
        document.head.appendChild(gtmScript);
      });
    </script>

    <!-- FONTS - NON-BLOCKING -->
    <link 
      rel="preload"
      href="https://db.onlinewebfonts.com/c/0a0cbbd2ee416efdde8260f3aafa0d14?family=Morion+Bold"
      as="style"
      onload="this.onload=null;this.rel='stylesheet'"
    />
    <noscript>
      <link href="https://db.onlinewebfonts.com/c/0a0cbbd2ee416efdde8260f3aafa0d14?family=Morion+Bold" rel="stylesheet" type="text/css" />
    </noscript>
    
    <link 
      rel="preload"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;800&family=Montserrat:wght@600;700;900&family=Cormorant+Garamond:wght@400;500;600&display=swap" 
      as="style"
      onload="this.onload=null;this.rel='stylesheet'"
    />
    <noscript>
      <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;800&family=Montserrat:wght@600;700;900&family=Cormorant+Garamond:wght@400;500;600&display=swap" rel="stylesheet" />
    </noscript>

    <!-- HERO PRELOAD -->
    <link rel="preload" as="image" href="/images/hero-poster.webp" media="(max-width: 768px)" type="image/webp" />
    
    <!-- Meta Pixel Code -->
    <script>
      window.addEventListener('load', function() {
        var isMobile = window.matchMedia('(max-width: 768px)').matches || window.matchMedia('(pointer: coarse)').matches;
        if (isMobile) return;
        if (!window.fbq) {
          var fbq = function() {
            fbq.callMethod ? fbq.callMethod.apply(fbq, arguments) : fbq.queue.push(arguments);
          };
          window.fbq = fbq;
          fbq.push = fbq;
          fbq.loaded = true;
          fbq.version = '2.0';
          fbq.queue = [];
          var fbScript = document.createElement('script');
          fbScript.async = true;
          fbScript.src = 'https://connect.facebook.net/en_US/fbevents.js';
          document.head.appendChild(fbScript);
        }
        setTimeout(function() {
          if (window.fbq) {
            fbq('init', '991068654089906');
            fbq('track', 'PageView');
          }
        }, 1500);
      });
    </script>
    <noscript><img height="1" width="1" style="display:none"
      src="https://www.facebook.com/tr?id=991068654089906&ev=PageView&noscript=1"
    /></noscript>
    <!-- End Meta Pixel Code -->

    <style>
      #CybotCookiebotDialog, #CybotCookiebotDialog * { cursor: auto !important; }
      #CookiebotWidget, #CookiebotWidget * { cursor: auto !important; }
      #CybotCookiebotDialogBodyLevelButtonAccept:hover,
      #CybotCookiebotDialogBodyButtonSettings:hover,
      #CybotCookiebotDialogBodyLevelButtonDecline:hover,
      #CookiebotWidget .CookiebotWidget-btn:hover { cursor: none !important; }
      html { font-family: Inter, ui-sans-serif, system-ui, sans-serif; }
    </style>

    %sveltekit.head%
  </head>
  
  <body class="antialiased" data-sveltekit-preload-data="hover">
    <noscript>
      <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-THRM454W" height="0" width="0" style="display:none;visibility:hidden" title="GTM"></iframe>
    </noscript>
    <div style="display: contents">%sveltekit.body%</div>
  </body>
</html>
